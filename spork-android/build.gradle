apply plugin: 'com.android.library'
apply plugin: 'com.github.kt3k.coveralls'

apply from: rootProject.file('gradle/jacoco.gradle')
apply from: rootProject.file('gradle/gradle-mvn-push.gradle')

repositories {
    jcenter()
    flatDir {
        dirs 'libs'
    }
}

dependencies {
    compile (
        [group: 'io.github.sporklibrary', name: 'spork', version: '3.0.2'],
    )

    provided (
        [group: 'com.android.support', name: 'support-v4', version: '23+'],
        [group: 'com.android.support', name: 'appcompat-v7', version: '23+'],
        [group: 'com.android.support', name: 'recyclerview-v7', version: '23+']
    )

    androidTestCompile (
        [name:'support-v4-23.2.1', ext:'aar'],
        [name:'appcompat-v7-23.2.1', ext:'aar'],
        [name:'recyclerview-v7-23.2.1', ext:'aar'],
        [group: 'com.android.support.test', name: 'runner', version: '0.5'],
        [group: 'com.android.support.test.espresso', name: 'espresso-core', version: '2.2.2'],
        [group: 'com.android.support.test.espresso', name: 'espresso-contrib', version: '2.2.2']
    )
}

coveralls {
    jacocoReportPath 'build/reports/coverage/debug/report.xml'
}

android {
    compileSdkVersion 23
    buildToolsVersion '23.0.1'

    defaultConfig {
        minSdkVersion 15
        targetSdkVersion 23
        versionCode 1
        versionName VERSION_NAME
        testInstrumentationRunner 'io.github.sporklibrary.test.TestRunner'
        testApplicationId 'io.github.sporklibrary.test'
        testHandleProfiling true
        testFunctionalTest true
        consumerProguardFiles 'proguard.pro'
    }

    packagingOptions {
        exclude 'META-INF/DEPENDENCIES'
        exclude 'META-INF/LICENSE'
        exclude 'META-INF/LICENSE.txt'
        exclude 'META-INF/NOTICE'
        exclude 'META-INF/NOTICE.txt'
        exclude 'META-INF/ASL2.0'
        exclude 'META-INF/ASL2.0.txt'
        exclude 'LICENSE.txt'
        exclude 'LICENSE'
    }

    buildTypes {
        debug {
            testCoverageEnabled true
        }
    }
}