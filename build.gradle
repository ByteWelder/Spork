apply from: rootProject.file('gradle/maven-base.gradle')

ext {
	junitVersion = '4.12'
	mockitoVersion = '2.7.9'
}

subprojects {
	buildscript {
		repositories {
			mavenCentral()
			jcenter()
		}

		dependencies {
			classpath 'com.android.tools.build:gradle:2.2.0'
			classpath 'org.jacoco:org.jacoco.core:0.7.7.201606060606'
			classpath 'com.getkeepsafe.dexcount:dexcount-gradle-plugin:0.6.1'
		}
	}

	repositories {
		// Non-release builds get dependencies from local maven
		if (!mavenConfig.isReleaseBuild()) {
			mavenLocal()
		}

		mavenCentral()
	}

	apply plugin: 'jacoco'
	apply plugin: 'checkstyle'
	apply plugin: 'findbugs'

	checkstyle {
		configFile = new File(rootDir, 'checkstyle.xml')
	}

	group = GROUP
	version = VERSION_NAME

	gradle.projectsEvaluated {
		tasks.withType(JavaCompile) {
			options.compilerArgs << '-Xlint:unchecked' << '-Xlint:deprecation'
		}
	}

	// TODO: Implement for Android tasks
	tasks.withType(FindBugs) {
		reports {
			xml.enabled false
			html.enabled true
		}
	}
}